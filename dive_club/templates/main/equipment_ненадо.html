{% extends 'base.html' %}
{% load static %}

{% block title %}Оборудование - Дайверы{% endblock %}

{% block content %}

<!-- Форма фильтрации -->
<div class="filter-section">
    <h2>Фильтр по категориям</h2>
    <form method="GET" action="{% url 'equipment_list' %}">
        <select name="category" onchange="this.form.submit()">
            <option value="">Все категории</option>
            {% for category in categories %}
                <option value="{{ category.name }}">{{ category.name }}</option>
            {% endfor %}
        </select>
    </form>
</div>

<!-- Секция с фоновым изображением и заголовком страницы оборудования -->
<section class="equipment-hero" style="background-image: url('{{ equipment_page_content.background_photo.url }}');">
  <div class="overlay">
    <h1>{{ equipment_page_content.title }}</h1>
    <p>{{ equipment_page_content.description }}</p>
  </div>
</section>

<!-- Секция со списком оборудования -->
<section class="equipment-list container">
  <h2>Наше оборудование</h2>
  <div class="equipment-items">
    {% for eq in equipment_list %}
      <div class="equipment-item">
        <div class="event-image-wrapper">
          <img src="{{ eq.image.url }}" alt="{{ eq.name }}" class="equipment-image">
        </div>
        <div class="event-text">
          <h3>{{ eq.name }}</h3>
          <p>{{ eq.description|truncatechars:100|default:"Нет описания" }}</p>
          <a href="{% url 'equipment_detail' eq.id %}" class="cta-button">Читать далее</a> <!-- Ссылка на страницу оборудования -->
        </div>
      </div>
    {% empty %}
      <div class="placeholder">
        <p>Пока нет оборудования</p>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
